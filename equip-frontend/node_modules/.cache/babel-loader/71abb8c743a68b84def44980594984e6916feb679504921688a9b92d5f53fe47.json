{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lsps_\\\\OneDrive\\\\Documents\\\\equip_mgmt\\\\equip-frontend\\\\src\\\\components\\\\GenericForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport Papa from \"papaparse\";\nimport debounce from \"lodash/debounce\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GenericForm = ({\n  fields,\n  onAddSingle,\n  onAddCSV,\n  initialValues,\n  onOwnerInput\n}) => {\n  _s();\n  const [mode, setMode] = useState(\"single\");\n  const [formData, setFormData] = useState({});\n  const [csvFile, setCsvFile] = useState(null);\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\n  const [highlightIndex, setHighlightIndex] = useState(0);\n  const isComposing = useRef(false);\n  const initialState = useMemo(() => fields.reduce((acc, f) => ({\n    ...acc,\n    [f.name]: \"\"\n  }), {\n    owner_user_display: \"\"\n  }), [fields]);\n\n  // 初始化或編輯時帶入資料\n  useEffect(() => {\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n  }, [initialValues, initialState]);\n\n  // 切換模式\n  const handleModeChange = newMode => {\n    setMode(newMode);\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n    setCsvFile(null);\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n\n  // debounce 搜尋\n  const debouncedOwnerInput = useRef(debounce(async value => {\n    if (!value.trim() || !onOwnerInput) return;\n    try {\n      const candidates = await onOwnerInput(value);\n      setOwnerCandidates(candidates);\n      setShowOwnerDropdown(candidates.length > 0);\n      setHighlightIndex(0);\n    } catch {\n      setOwnerCandidates([]);\n      setShowOwnerDropdown(false);\n    }\n  }, 500)).current;\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === \"owner_user\" && !isComposing.current) {\n      debouncedOwnerInput(value);\n    }\n  };\n  const handleCompositionStart = () => isComposing.current = true;\n  const handleCompositionEnd = e => {\n    isComposing.current = false;\n    // 組字完成後觸發搜尋\n    if (e.target.name === \"owner_user\") debouncedOwnerInput(e.target.value);\n  };\n  const handleOwnerSelect = person => {\n    setFormData(prev => ({\n      ...prev,\n      owner_user: person.id,\n      owner_user_display: person.name\n    }));\n    setShowOwnerDropdown(false);\n  };\n  const handleOwnerKeyDown = e => {\n    if (!showOwnerDropdown) return;\n    if (e.key === \"ArrowDown\") {\n      setHighlightIndex(prev => (prev + 1) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"ArrowUp\") {\n      setHighlightIndex(prev => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"Enter\") {\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\n      e.preventDefault();\n    } else if (e.key === \"Escape\") {\n      setShowOwnerDropdown(false);\n    }\n  };\n  const handleSingleSubmit = e => {\n    e.preventDefault();\n    onAddSingle(formData);\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n  const handleCSVChange = e => setCsvFile(e.target.files[0]);\n  const handleCSVSubmit = e => {\n    e.preventDefault();\n    if (!csvFile) return;\n    Papa.parse(csvFile, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        onAddCSV(results.data);\n        setCsvFile(null);\n      }\n    });\n  };\n  const isEditing = !!(initialValues !== null && initialValues !== void 0 && initialValues.id);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"10px\",\n      marginBottom: \"20px\",\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"single\"),\n        style: {\n          marginRight: \"10px\",\n          background: mode === \"single\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"\\u55AE\\u7B46\\u65B0\\u589E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"csv\"),\n        style: {\n          background: mode === \"csv\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"CSV \\u532F\\u5165\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), mode === \"single\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSingleSubmit,\n      autoComplete: \"off\",\n      children: [fields.map(f => {\n        var _formData$f$name;\n        const isRequired = f.required && !(f.name === \"borrowed_at\" || f.name === \"returned_at\");\n        if (f.name === \"owner_user\") {\n          var _ref, _formData$owner_user_;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"relative\",\n              marginBottom: \"5px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: f.name,\n              placeholder: f.label,\n              value: (_ref = (_formData$owner_user_ = formData.owner_user_display) !== null && _formData$owner_user_ !== void 0 ? _formData$owner_user_ : formData.owner_user) !== null && _ref !== void 0 ? _ref : \"\",\n              onChange: handleInputChange,\n              onCompositionStart: handleCompositionStart,\n              onCompositionEnd: handleCompositionEnd,\n              onKeyDown: handleOwnerKeyDown,\n              required: isRequired,\n              style: {\n                width: \"200px\",\n                padding: \"5px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, this), showOwnerDropdown && /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                position: \"absolute\",\n                top: \"30px\",\n                left: 0,\n                border: \"1px solid #ccc\",\n                background: \"#fff\",\n                listStyle: \"none\",\n                margin: 0,\n                padding: 0,\n                width: \"200px\",\n                maxHeight: \"150px\",\n                overflowY: \"auto\",\n                zIndex: 100\n              },\n              children: ownerCandidates.map((p, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => handleOwnerSelect(p),\n                style: {\n                  padding: \"5px\",\n                  cursor: \"pointer\",\n                  background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\n                  color: idx === highlightIndex ? \"#fff\" : \"#000\"\n                },\n                children: [p.name, \" \", p.department ? `(${p.department})` : \"\"]\n              }, `${p.id}-${idx}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 21\n            }, this)]\n          }, f.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 17\n          }, this);\n        }\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: f.type,\n          name: f.name,\n          placeholder: f.label,\n          value: (_formData$f$name = formData[f.name]) !== null && _formData$f$name !== void 0 ? _formData$f$name : \"\",\n          onChange: handleInputChange,\n          required: isRequired,\n          style: {\n            marginRight: \"10px\",\n            marginBottom: \"5px\"\n          }\n        }, f.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 15\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: isEditing ? \"更新\" : \"新增\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this), mode === \"csv\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleCSVSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        onChange: e => {\n          handleCSVChange(e);\n          e.target.value = \"\"; // 匯入後清空檔案名稱\n        },\n        style: {\n          marginRight: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u532F\\u5165 CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n_s(GenericForm, \"jAhe01G8wb8EmJbO4enOwwOXNd4=\");\n_c = GenericForm;\nexport default GenericForm;\nvar _c;\n$RefreshReg$(_c, \"GenericForm\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","Papa","debounce","jsxDEV","_jsxDEV","GenericForm","fields","onAddSingle","onAddCSV","initialValues","onOwnerInput","_s","mode","setMode","formData","setFormData","csvFile","setCsvFile","ownerCandidates","setOwnerCandidates","showOwnerDropdown","setShowOwnerDropdown","highlightIndex","setHighlightIndex","isComposing","initialState","reduce","acc","f","name","owner_user_display","handleModeChange","newMode","debouncedOwnerInput","value","trim","candidates","length","current","handleInputChange","e","target","prev","handleCompositionStart","handleCompositionEnd","handleOwnerSelect","person","owner_user","id","handleOwnerKeyDown","key","preventDefault","handleSingleSubmit","handleCSVChange","files","handleCSVSubmit","parse","header","skipEmptyLines","complete","results","data","isEditing","style","border","padding","marginBottom","position","children","type","onClick","marginRight","background","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","autoComplete","map","_formData$f$name","isRequired","required","_ref","_formData$owner_user_","placeholder","label","onChange","onCompositionStart","onCompositionEnd","onKeyDown","width","top","left","listStyle","margin","maxHeight","overflowY","zIndex","p","idx","cursor","department","accept","_c","$RefreshReg$"],"sources":["C:/Users/lsps_/OneDrive/Documents/equip_mgmt/equip-frontend/src/components/GenericForm.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nconst GenericForm = ({ fields, onAddSingle, onAddCSV, initialValues, onOwnerInput }) => {\r\n  const [mode, setMode] = useState(\"single\");\r\n  const [formData, setFormData] = useState({});\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\r\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\r\n  const [highlightIndex, setHighlightIndex] = useState(0);\r\n  const isComposing = useRef(false);\r\n\r\n  const initialState = useMemo(\r\n    () => fields.reduce((acc, f) => ({ ...acc, [f.name]: \"\" }), { owner_user_display: \"\" }),\r\n    [fields]\r\n  );\r\n\r\n  // 初始化或編輯時帶入資料\r\n  useEffect(() => {\r\n    setFormData({ ...initialState, ...initialValues });\r\n  }, [initialValues, initialState]);\r\n\r\n  // 切換模式\r\n  const handleModeChange = (newMode) => {\r\n    setMode(newMode);\r\n    setFormData({ ...initialState, ...initialValues });\r\n    setCsvFile(null);\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  // debounce 搜尋\r\n  const debouncedOwnerInput = useRef(\r\n    debounce(async (value) => {\r\n      if (!value.trim() || !onOwnerInput) return;\r\n      try {\r\n        const candidates = await onOwnerInput(value);\r\n        setOwnerCandidates(candidates);\r\n        setShowOwnerDropdown(candidates.length > 0);\r\n        setHighlightIndex(0);\r\n      } catch {\r\n        setOwnerCandidates([]);\r\n        setShowOwnerDropdown(false);\r\n      }\r\n    }, 500)\r\n  ).current;\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n\r\n    if (name === \"owner_user\" && !isComposing.current) {\r\n      debouncedOwnerInput(value);\r\n    }\r\n  };\r\n\r\n  const handleCompositionStart = () => (isComposing.current = true);\r\n  const handleCompositionEnd = (e) => {\r\n    isComposing.current = false;\r\n    // 組字完成後觸發搜尋\r\n    if (e.target.name === \"owner_user\") debouncedOwnerInput(e.target.value);\r\n  };\r\n\r\n  const handleOwnerSelect = (person) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      owner_user: person.id,\r\n      owner_user_display: person.name\r\n    }));\r\n    setShowOwnerDropdown(false);\r\n  };\r\n\r\n  const handleOwnerKeyDown = (e) => {\r\n    if (!showOwnerDropdown) return;\r\n    if (e.key === \"ArrowDown\") {\r\n      setHighlightIndex((prev) => (prev + 1) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"ArrowUp\") {\r\n      setHighlightIndex((prev) => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Enter\") {\r\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Escape\") {\r\n      setShowOwnerDropdown(false);\r\n    }\r\n  };\r\n\r\n  const handleSingleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onAddSingle(formData);\r\n    setFormData({ ...initialState, ...initialValues });\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  const handleCSVChange = (e) => setCsvFile(e.target.files[0]);\r\n\r\n  const handleCSVSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!csvFile) return;\r\n    Papa.parse(csvFile, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: (results) => {\r\n        onAddCSV(results.data);\r\n        setCsvFile(null);\r\n      },\r\n    });\r\n  };\r\n\r\n  const isEditing = !!initialValues?.id;\r\n\r\n  return (\r\n    <div style={{ border: \"1px solid #ccc\", padding: \"10px\", marginBottom: \"20px\", position: \"relative\" }}>\r\n      <div style={{ marginBottom: \"10px\" }}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"single\")}\r\n          style={{ marginRight: \"10px\", background: mode === \"single\" ? \"#007bff\" : \"#ccc\", color: \"#fff\" }}\r\n        >\r\n          單筆新增\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"csv\")}\r\n          style={{ background: mode === \"csv\" ? \"#007bff\" : \"#ccc\", color: \"#fff\" }}\r\n        >\r\n          CSV 匯入\r\n        </button>\r\n      </div>\r\n\r\n      {mode === \"single\" && (\r\n        <form onSubmit={handleSingleSubmit} autoComplete=\"off\">\r\n          {fields.map((f) => {\r\n            const isRequired = f.required && !(f.name === \"borrowed_at\" || f.name === \"returned_at\");\r\n\r\n            if (f.name === \"owner_user\") {\r\n              return (\r\n                <div key={f.name} style={{ position: \"relative\", marginBottom: \"5px\" }}>\r\n                  <input\r\n                    type=\"text\"\r\n                    name={f.name}\r\n                    placeholder={f.label}\r\n                    value={formData.owner_user_display ?? formData.owner_user ?? \"\"}\r\n                    onChange={handleInputChange}\r\n                    onCompositionStart={handleCompositionStart}\r\n                    onCompositionEnd={handleCompositionEnd}\r\n                    onKeyDown={handleOwnerKeyDown}\r\n                    required={isRequired}\r\n                    style={{ width: \"200px\", padding: \"5px\" }}\r\n                  />\r\n                  {showOwnerDropdown && (\r\n                    <ul style={{\r\n                      position: \"absolute\",\r\n                      top: \"30px\",\r\n                      left: 0,\r\n                      border: \"1px solid #ccc\",\r\n                      background: \"#fff\",\r\n                      listStyle: \"none\",\r\n                      margin: 0,\r\n                      padding: 0,\r\n                      width: \"200px\",\r\n                      maxHeight: \"150px\",\r\n                      overflowY: \"auto\",\r\n                      zIndex: 100\r\n                    }}>\r\n                      {ownerCandidates.map((p, idx) => (\r\n                        <li\r\n                          key={`${p.id}-${idx}`}\r\n                          onClick={() => handleOwnerSelect(p)}\r\n                          style={{\r\n                            padding: \"5px\",\r\n                            cursor: \"pointer\",\r\n                            background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\r\n                            color: idx === highlightIndex ? \"#fff\" : \"#000\"\r\n                          }}\r\n                        >\r\n                          {p.name} {p.department ? `(${p.department})` : \"\"}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              );\r\n            }\r\n\r\n            return (\r\n              <input\r\n                key={f.name}\r\n                type={f.type}\r\n                name={f.name}\r\n                placeholder={f.label}\r\n                value={formData[f.name] ?? \"\"}\r\n                onChange={handleInputChange}\r\n                required={isRequired}\r\n                style={{ marginRight: \"10px\", marginBottom: \"5px\" }}\r\n              />\r\n            );\r\n          })}\r\n          <button type=\"submit\">{isEditing ? \"更新\" : \"新增\"}</button>\r\n        </form>\r\n      )}\r\n\r\n      {mode === \"csv\" && (\r\n        <form onSubmit={handleCSVSubmit}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".csv\"\r\n            onChange={(e) => {\r\n              handleCSVChange(e);\r\n              e.target.value = \"\"; // 匯入後清空檔案名稱\r\n            }}\r\n            style={{ marginRight: \"10px\" }}\r\n          />\r\n          <button type=\"submit\">匯入 CSV</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenericForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}