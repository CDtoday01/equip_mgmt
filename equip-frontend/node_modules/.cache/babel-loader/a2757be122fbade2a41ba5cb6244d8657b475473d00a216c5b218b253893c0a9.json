{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lsps_\\\\OneDrive\\\\Documents\\\\equip_mgmt\\\\equip-frontend\\\\src\\\\components\\\\GenericForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport Papa from \"papaparse\";\nimport debounce from \"lodash/debounce\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GenericForm = ({\n  fields,\n  onAddSingle,\n  onAddCSV,\n  initialValues,\n  onOwnerInput\n}) => {\n  _s();\n  const [mode, setMode] = useState(\"single\");\n  const [formData, setFormData] = useState({});\n  const [csvFile, setCsvFile] = useState(null);\n  const [csvFileName, setCsvFileName] = useState(\"未選擇檔案\"); // ✅ 新增\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\n  const [highlightIndex, setHighlightIndex] = useState(0);\n  const isComposing = useRef(false);\n  const initialState = useMemo(() => fields.reduce((acc, f) => ({\n    ...acc,\n    [f.name]: \"\"\n  }), {}), [fields]);\n  useEffect(() => {\n    if (initialValues) {\n      var _initialValues$holder, _initialValues$holder2;\n      const mapped = {\n        ...initialState,\n        ...initialValues,\n        owner_user_display: ((_initialValues$holder = initialValues.holder) === null || _initialValues$holder === void 0 ? void 0 : _initialValues$holder.name) || \"\",\n        owner_user: initialValues.owner_user || ((_initialValues$holder2 = initialValues.holder) === null || _initialValues$holder2 === void 0 ? void 0 : _initialValues$holder2.id) || \"\"\n      };\n      setFormData(mapped);\n    } else {\n      setFormData({\n        ...initialState\n      });\n    }\n  }, [initialValues, initialState]);\n  const handleModeChange = newMode => {\n    setMode(newMode);\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n    setCsvFile(null);\n    setCsvFileName(\"未選擇檔案\"); // ✅ 新增\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n  const debouncedOwnerInput = useRef(debounce(async value => {\n    if (!onOwnerInput || value.trim() === \"\") return;\n    try {\n      const candidates = await onOwnerInput(value);\n      setOwnerCandidates(candidates);\n      setShowOwnerDropdown(candidates.length > 0);\n      setHighlightIndex(0);\n    } catch {\n      setOwnerCandidates([]);\n      setShowOwnerDropdown(false);\n    }\n  }, 500)).current;\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === \"owner_user\" && !isComposing.current) {\n      debouncedOwnerInput(value);\n    }\n  };\n  const handleCompositionStart = () => isComposing.current = true;\n  const handleCompositionEnd = e => {\n    isComposing.current = false;\n    handleInputChange(e);\n  };\n  const handleOwnerSelect = person => {\n    setFormData(prev => ({\n      ...prev,\n      owner_user: person.id,\n      owner_user_display: person.name\n    }));\n    setShowOwnerDropdown(false);\n  };\n  const handleOwnerKeyDown = e => {\n    if (!showOwnerDropdown) return;\n    if (e.key === \"ArrowDown\") {\n      setHighlightIndex(prev => (prev + 1) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"ArrowUp\") {\n      setHighlightIndex(prev => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"Enter\") {\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\n      e.preventDefault();\n    } else if (e.key === \"Escape\") {\n      setShowOwnerDropdown(false);\n    }\n  };\n  const handleSingleSubmit = e => {\n    e.preventDefault();\n    onAddSingle(formData, !!(initialValues !== null && initialValues !== void 0 && initialValues.id));\n    setFormData({\n      ...initialState\n    });\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n  const handleCSVChange = e => {\n    const file = e.target.files[0];\n    setCsvFile(file);\n    setCsvFileName(file ? file.name : \"未選擇檔案\"); // ✅ 新增\n  };\n  const handleCSVSubmit = e => {\n    e.preventDefault();\n    if (!csvFile) return;\n    Papa.parse(csvFile, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        onAddCSV(results.data);\n        setCsvFile(null);\n        setCsvFileName(\"未選擇檔案\"); // ✅ 重置顯示\n        e.target.reset();\n      }\n    });\n  };\n  const isEditing = !!(initialValues !== null && initialValues !== void 0 && initialValues.id);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"10px\",\n      marginBottom: \"20px\",\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"single\"),\n        style: {\n          marginRight: \"10px\",\n          background: mode === \"single\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"\\u55AE\\u7B46\\u65B0\\u589E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"csv\"),\n        style: {\n          background: mode === \"csv\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"CSV \\u532F\\u5165\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), mode === \"single\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSingleSubmit,\n      autoComplete: \"off\",\n      children: [fields.map(f => {\n        const isRequired = f.required;\n        if (f.name === \"owner_user\") {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"relative\",\n              marginBottom: \"5px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: f.name,\n              placeholder: f.label,\n              value: formData.owner_user_display || \"\",\n              onChange: handleInputChange,\n              onCompositionStart: handleCompositionStart,\n              onCompositionEnd: handleCompositionEnd,\n              onKeyDown: handleOwnerKeyDown,\n              required: isRequired,\n              style: {\n                width: \"200px\",\n                padding: \"5px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 19\n            }, this), showOwnerDropdown && /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                position: \"absolute\",\n                top: \"30px\",\n                left: 0,\n                border: \"1px solid #ccc\",\n                background: \"#fff\",\n                listStyle: \"none\",\n                margin: 0,\n                padding: 0,\n                width: \"200px\",\n                maxHeight: \"150px\",\n                overflowY: \"auto\",\n                zIndex: 100\n              },\n              children: ownerCandidates.map((p, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => handleOwnerSelect(p),\n                style: {\n                  padding: \"5px\",\n                  cursor: \"pointer\",\n                  background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\n                  color: idx === highlightIndex ? \"#fff\" : \"#000\"\n                },\n                children: [p.name, \" \", p.department ? `(${p.department})` : \"\"]\n              }, p.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 21\n            }, this)]\n          }, f.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 17\n          }, this);\n        }\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: f.type,\n          name: f.name,\n          placeholder: f.label,\n          value: formData[f.name] || \"\",\n          onChange: handleInputChange,\n          required: isRequired,\n          style: {\n            marginRight: \"10px\",\n            marginBottom: \"5px\"\n          }\n        }, f.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: isEditing ? \"修改\" : \"新增\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }, this), mode === \"csv\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleCSVSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        onChange: handleCSVChange,\n        style: {\n          marginRight: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u532F\\u5165 CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          marginLeft: \"10px\"\n        },\n        children: csvFileName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(GenericForm, \"AdxCcgHMORRuXY5++tco/uBwxA0=\");\n_c = GenericForm;\nexport default GenericForm;\nvar _c;\n$RefreshReg$(_c, \"GenericForm\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","Papa","debounce","jsxDEV","_jsxDEV","GenericForm","fields","onAddSingle","onAddCSV","initialValues","onOwnerInput","_s","mode","setMode","formData","setFormData","csvFile","setCsvFile","csvFileName","setCsvFileName","ownerCandidates","setOwnerCandidates","showOwnerDropdown","setShowOwnerDropdown","highlightIndex","setHighlightIndex","isComposing","initialState","reduce","acc","f","name","_initialValues$holder","_initialValues$holder2","mapped","owner_user_display","holder","owner_user","id","handleModeChange","newMode","debouncedOwnerInput","value","trim","candidates","length","current","handleInputChange","e","target","prev","handleCompositionStart","handleCompositionEnd","handleOwnerSelect","person","handleOwnerKeyDown","key","preventDefault","handleSingleSubmit","handleCSVChange","file","files","handleCSVSubmit","parse","header","skipEmptyLines","complete","results","data","reset","isEditing","style","border","padding","marginBottom","position","children","type","onClick","marginRight","background","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","autoComplete","map","isRequired","required","placeholder","label","onChange","onCompositionStart","onCompositionEnd","onKeyDown","width","top","left","listStyle","margin","maxHeight","overflowY","zIndex","p","idx","cursor","department","accept","marginLeft","_c","$RefreshReg$"],"sources":["C:/Users/lsps_/OneDrive/Documents/equip_mgmt/equip-frontend/src/components/GenericForm.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nconst GenericForm = ({ fields, onAddSingle, onAddCSV, initialValues, onOwnerInput }) => {\r\n  const [mode, setMode] = useState(\"single\");\r\n  const [formData, setFormData] = useState({});\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const [csvFileName, setCsvFileName] = useState(\"未選擇檔案\"); // ✅ 新增\r\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\r\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\r\n  const [highlightIndex, setHighlightIndex] = useState(0);\r\n  const isComposing = useRef(false);\r\n\r\n  const initialState = useMemo(\r\n    () => fields.reduce((acc, f) => ({ ...acc, [f.name]: \"\" }), {}),\r\n    [fields]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (initialValues) {\r\n      const mapped = {\r\n        ...initialState,\r\n        ...initialValues,\r\n        owner_user_display: initialValues.holder?.name || \"\",\r\n        owner_user: initialValues.owner_user || initialValues.holder?.id || \"\",\r\n      };\r\n      setFormData(mapped);\r\n    } else {\r\n      setFormData({ ...initialState });\r\n    }\r\n  }, [initialValues, initialState]);\r\n\r\n  const handleModeChange = (newMode) => {\r\n    setMode(newMode);\r\n    setFormData({ ...initialState, ...initialValues });\r\n    setCsvFile(null);\r\n    setCsvFileName(\"未選擇檔案\"); // ✅ 新增\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  const debouncedOwnerInput = useRef(\r\n    debounce(async (value) => {\r\n      if (!onOwnerInput || value.trim() === \"\") return;\r\n      try {\r\n        const candidates = await onOwnerInput(value);\r\n        setOwnerCandidates(candidates);\r\n        setShowOwnerDropdown(candidates.length > 0);\r\n        setHighlightIndex(0);\r\n      } catch {\r\n        setOwnerCandidates([]);\r\n        setShowOwnerDropdown(false);\r\n      }\r\n    }, 500)\r\n  ).current;\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n    if (name === \"owner_user\" && !isComposing.current) {\r\n      debouncedOwnerInput(value);\r\n    }\r\n  };\r\n\r\n  const handleCompositionStart = () => (isComposing.current = true);\r\n  const handleCompositionEnd = (e) => {\r\n    isComposing.current = false;\r\n    handleInputChange(e);\r\n  };\r\n\r\n  const handleOwnerSelect = (person) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      owner_user: person.id,\r\n      owner_user_display: person.name,\r\n    }));\r\n    setShowOwnerDropdown(false);\r\n  };\r\n\r\n  const handleOwnerKeyDown = (e) => {\r\n    if (!showOwnerDropdown) return;\r\n    if (e.key === \"ArrowDown\") {\r\n      setHighlightIndex((prev) => (prev + 1) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"ArrowUp\") {\r\n      setHighlightIndex((prev) => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Enter\") {\r\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Escape\") {\r\n      setShowOwnerDropdown(false);\r\n    }\r\n  };\r\n\r\n  const handleSingleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onAddSingle(formData, !!initialValues?.id);\r\n    setFormData({ ...initialState });\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  const handleCSVChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setCsvFile(file);\r\n    setCsvFileName(file ? file.name : \"未選擇檔案\"); // ✅ 新增\r\n  };\r\n\r\n  const handleCSVSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!csvFile) return;\r\n    Papa.parse(csvFile, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: (results) => {\r\n        onAddCSV(results.data);\r\n        setCsvFile(null);\r\n        setCsvFileName(\"未選擇檔案\"); // ✅ 重置顯示\r\n        e.target.reset();\r\n      },\r\n    });\r\n  };\r\n\r\n  const isEditing = !!initialValues?.id;\r\n\r\n  return (\r\n    <div style={{ border: \"1px solid #ccc\", padding: \"10px\", marginBottom: \"20px\", position: \"relative\" }}>\r\n      <div style={{ marginBottom: \"10px\" }}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"single\")}\r\n          style={{\r\n            marginRight: \"10px\",\r\n            background: mode === \"single\" ? \"#007bff\" : \"#ccc\",\r\n            color: \"#fff\",\r\n          }}\r\n        >\r\n          單筆新增\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"csv\")}\r\n          style={{\r\n            background: mode === \"csv\" ? \"#007bff\" : \"#ccc\",\r\n            color: \"#fff\",\r\n          }}\r\n        >\r\n          CSV 匯入\r\n        </button>\r\n      </div>\r\n\r\n      {mode === \"single\" && (\r\n        <form onSubmit={handleSingleSubmit} autoComplete=\"off\">\r\n          {fields.map((f) => {\r\n            const isRequired = f.required;\r\n            if (f.name === \"owner_user\") {\r\n              return (\r\n                <div key={f.name} style={{ position: \"relative\", marginBottom: \"5px\" }}>\r\n                  <input\r\n                    type=\"text\"\r\n                    name={f.name}\r\n                    placeholder={f.label}\r\n                    value={formData.owner_user_display || \"\"}\r\n                    onChange={handleInputChange}\r\n                    onCompositionStart={handleCompositionStart}\r\n                    onCompositionEnd={handleCompositionEnd}\r\n                    onKeyDown={handleOwnerKeyDown}\r\n                    required={isRequired}\r\n                    style={{ width: \"200px\", padding: \"5px\" }}\r\n                  />\r\n                  {showOwnerDropdown && (\r\n                    <ul\r\n                      style={{\r\n                        position: \"absolute\",\r\n                        top: \"30px\",\r\n                        left: 0,\r\n                        border: \"1px solid #ccc\",\r\n                        background: \"#fff\",\r\n                        listStyle: \"none\",\r\n                        margin: 0,\r\n                        padding: 0,\r\n                        width: \"200px\",\r\n                        maxHeight: \"150px\",\r\n                        overflowY: \"auto\",\r\n                        zIndex: 100,\r\n                      }}\r\n                    >\r\n                      {ownerCandidates.map((p, idx) => (\r\n                        <li\r\n                          key={p.id}\r\n                          onClick={() => handleOwnerSelect(p)}\r\n                          style={{\r\n                            padding: \"5px\",\r\n                            cursor: \"pointer\",\r\n                            background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\r\n                            color: idx === highlightIndex ? \"#fff\" : \"#000\",\r\n                          }}\r\n                        >\r\n                          {p.name} {p.department ? `(${p.department})` : \"\"}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              );\r\n            }\r\n            return (\r\n              <input\r\n                key={f.name}\r\n                type={f.type}\r\n                name={f.name}\r\n                placeholder={f.label}\r\n                value={formData[f.name] || \"\"}\r\n                onChange={handleInputChange}\r\n                required={isRequired}\r\n                style={{ marginRight: \"10px\", marginBottom: \"5px\" }}\r\n              />\r\n            );\r\n          })}\r\n          <button type=\"submit\">{isEditing ? \"修改\" : \"新增\"}</button>\r\n        </form>\r\n      )}\r\n\r\n      {mode === \"csv\" && (\r\n        <form onSubmit={handleCSVSubmit}>\r\n          <input type=\"file\" accept=\".csv\" onChange={handleCSVChange} style={{ marginRight: \"10px\" }} />\r\n          <button type=\"submit\">匯入 CSV</button>\r\n          <span style={{ marginLeft: \"10px\" }}>{csvFileName}</span> {/* ✅ 顯示檔案名稱 */}\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenericForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}