{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lsps_\\\\OneDrive\\\\Documents\\\\equip_mgmt\\\\equip-frontend\\\\src\\\\components\\\\GenericForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport Papa from \"papaparse\";\nimport debounce from \"lodash/debounce\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GenericForm = ({\n  fields,\n  onAddSingle,\n  onAddCSV,\n  initialValues,\n  onOwnerInput\n}) => {\n  _s();\n  const [mode, setMode] = useState(\"single\");\n  const [formData, setFormData] = useState({});\n  const [csvFile, setCsvFile] = useState(null);\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\n  const [highlightIndex, setHighlightIndex] = useState(0);\n  const isComposing = useRef(false);\n  const initialState = useMemo(() => fields.reduce((acc, f) => ({\n    ...acc,\n    [f.name]: \"\"\n  }), {}), [fields]);\n\n  // 編輯時帶入初始值\n  useEffect(() => {\n    if (initialValues) {\n      const mapped = {\n        ...initialState,\n        ...initialValues\n      };\n      if (initialValues.owner_user_display) {\n        mapped.owner_user = initialValues.owner_user;\n      }\n      setFormData(mapped);\n    } else {\n      setFormData({\n        ...initialState\n      });\n    }\n  }, [initialValues, initialState]);\n  const handleModeChange = newMode => {\n    setMode(newMode);\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n    setCsvFile(null);\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n\n  // debounce 搜尋\n  const debouncedOwnerInput = useRef(debounce(async value => {\n    if (!onOwnerInput || value.trim() === \"\") return;\n    try {\n      const candidates = await onOwnerInput(value);\n      setOwnerCandidates(candidates);\n      setShowOwnerDropdown(candidates.length > 0);\n      setHighlightIndex(0);\n    } catch {\n      setOwnerCandidates([]);\n      setShowOwnerDropdown(false);\n    }\n  }, 500)).current;\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === \"owner_user\" && !isComposing.current) {\n      debouncedOwnerInput(value);\n    }\n  };\n  const handleCompositionStart = () => isComposing.current = true;\n  const handleCompositionEnd = e => {\n    isComposing.current = false;\n    handleInputChange(e);\n  };\n  const handleOwnerSelect = person => {\n    setFormData(prev => ({\n      ...prev,\n      owner_user: person.id,\n      owner_user_display: person.name\n    }));\n    setShowOwnerDropdown(false);\n  };\n  const handleOwnerKeyDown = e => {\n    if (!showOwnerDropdown) return;\n    if (e.key === \"ArrowDown\") {\n      setHighlightIndex(prev => (prev + 1) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"ArrowUp\") {\n      setHighlightIndex(prev => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"Enter\") {\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\n      e.preventDefault();\n    } else if (e.key === \"Escape\") {\n      setShowOwnerDropdown(false);\n    }\n  };\n  const handleSingleSubmit = e => {\n    e.preventDefault();\n    onAddSingle(formData, !!(initialValues !== null && initialValues !== void 0 && initialValues.id));\n    setFormData({\n      ...initialState\n    });\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n  const handleCSVChange = e => setCsvFile(e.target.files[0]);\n  const handleCSVSubmit = e => {\n    e.preventDefault();\n    if (!csvFile) return;\n    Papa.parse(csvFile, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        onAddCSV(results.data);\n        setCsvFile(null);\n        e.target.reset();\n      }\n    });\n  };\n  const isEditing = !!(initialValues !== null && initialValues !== void 0 && initialValues.id);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"10px\",\n      marginBottom: \"20px\",\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"single\"),\n        style: {\n          marginRight: \"10px\",\n          background: mode === \"single\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"\\u55AE\\u7B46\\u65B0\\u589E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"csv\"),\n        style: {\n          background: mode === \"csv\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"CSV \\u532F\\u5165\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), mode === \"single\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSingleSubmit,\n      autoComplete: \"off\",\n      children: [fields.map(f => {\n        const isRequired = f.required;\n        if (f.name === \"owner_user\") {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"relative\",\n              marginBottom: \"5px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: f.name,\n              placeholder: f.label,\n              value: formData.owner_user_display || \"\",\n              onChange: handleInputChange,\n              onCompositionStart: handleCompositionStart,\n              onCompositionEnd: handleCompositionEnd,\n              onKeyDown: handleOwnerKeyDown,\n              required: isRequired,\n              style: {\n                width: \"200px\",\n                padding: \"5px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 19\n            }, this), showOwnerDropdown && /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                position: \"absolute\",\n                top: \"30px\",\n                left: 0,\n                border: \"1px solid #ccc\",\n                background: \"#fff\",\n                listStyle: \"none\",\n                margin: 0,\n                padding: 0,\n                width: \"200px\",\n                maxHeight: \"150px\",\n                overflowY: \"auto\",\n                zIndex: 100\n              },\n              children: ownerCandidates.map((p, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => handleOwnerSelect(p),\n                style: {\n                  padding: \"5px\",\n                  cursor: \"pointer\",\n                  background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\n                  color: idx === highlightIndex ? \"#fff\" : \"#000\"\n                },\n                children: [p.name, \" \", p.department ? `(${p.department})` : \"\"]\n              }, p.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 21\n            }, this)]\n          }, f.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this);\n        }\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: f.type,\n          name: f.name,\n          placeholder: f.label,\n          value: formData[f.name] || \"\",\n          onChange: handleInputChange,\n          required: isRequired,\n          style: {\n            marginRight: \"10px\",\n            marginBottom: \"5px\"\n          }\n        }, f.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: isEditing ? \"修改\" : \"新增\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this), mode === \"csv\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleCSVSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        onChange: e => {\n          handleCSVChange(e);\n          e.target.value = \"\";\n        },\n        style: {\n          marginRight: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u532F\\u5165 CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n};\n_s(GenericForm, \"jAhe01G8wb8EmJbO4enOwwOXNd4=\");\n_c = GenericForm;\nexport default GenericForm;\nvar _c;\n$RefreshReg$(_c, \"GenericForm\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","Papa","debounce","jsxDEV","_jsxDEV","GenericForm","fields","onAddSingle","onAddCSV","initialValues","onOwnerInput","_s","mode","setMode","formData","setFormData","csvFile","setCsvFile","ownerCandidates","setOwnerCandidates","showOwnerDropdown","setShowOwnerDropdown","highlightIndex","setHighlightIndex","isComposing","initialState","reduce","acc","f","name","mapped","owner_user_display","owner_user","handleModeChange","newMode","debouncedOwnerInput","value","trim","candidates","length","current","handleInputChange","e","target","prev","handleCompositionStart","handleCompositionEnd","handleOwnerSelect","person","id","handleOwnerKeyDown","key","preventDefault","handleSingleSubmit","handleCSVChange","files","handleCSVSubmit","parse","header","skipEmptyLines","complete","results","data","reset","isEditing","style","border","padding","marginBottom","position","children","type","onClick","marginRight","background","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","autoComplete","map","isRequired","required","placeholder","label","onChange","onCompositionStart","onCompositionEnd","onKeyDown","width","top","left","listStyle","margin","maxHeight","overflowY","zIndex","p","idx","cursor","department","accept","_c","$RefreshReg$"],"sources":["C:/Users/lsps_/OneDrive/Documents/equip_mgmt/equip-frontend/src/components/GenericForm.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nconst GenericForm = ({ fields, onAddSingle, onAddCSV, initialValues, onOwnerInput }) => {\r\n  const [mode, setMode] = useState(\"single\");\r\n  const [formData, setFormData] = useState({});\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\r\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\r\n  const [highlightIndex, setHighlightIndex] = useState(0);\r\n  const isComposing = useRef(false);\r\n\r\n  const initialState = useMemo(\r\n    () => fields.reduce((acc, f) => ({ ...acc, [f.name]: \"\" }), {}),\r\n    [fields]\r\n  );\r\n\r\n  // 編輯時帶入初始值\r\n  useEffect(() => {\r\n    if (initialValues) {\r\n      const mapped = { ...initialState, ...initialValues };\r\n      if (initialValues.owner_user_display) {\r\n        mapped.owner_user = initialValues.owner_user;\r\n      }\r\n      setFormData(mapped);\r\n    } else {\r\n      setFormData({ ...initialState });\r\n    }\r\n  }, [initialValues, initialState]);\r\n\r\n  const handleModeChange = (newMode) => {\r\n    setMode(newMode);\r\n    setFormData({ ...initialState, ...initialValues });\r\n    setCsvFile(null);\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  // debounce 搜尋\r\n  const debouncedOwnerInput = useRef(\r\n    debounce(async (value) => {\r\n      if (!onOwnerInput || value.trim() === \"\") return;\r\n      try {\r\n        const candidates = await onOwnerInput(value);\r\n        setOwnerCandidates(candidates);\r\n        setShowOwnerDropdown(candidates.length > 0);\r\n        setHighlightIndex(0);\r\n      } catch {\r\n        setOwnerCandidates([]);\r\n        setShowOwnerDropdown(false);\r\n      }\r\n    }, 500)\r\n  ).current;\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n\r\n    if (name === \"owner_user\" && !isComposing.current) {\r\n      debouncedOwnerInput(value);\r\n    }\r\n  };\r\n\r\n  const handleCompositionStart = () => (isComposing.current = true);\r\n  const handleCompositionEnd = (e) => {\r\n    isComposing.current = false;\r\n    handleInputChange(e);\r\n  };\r\n\r\n  const handleOwnerSelect = (person) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      owner_user: person.id,\r\n      owner_user_display: person.name\r\n    }));\r\n    setShowOwnerDropdown(false);\r\n  };\r\n\r\n  const handleOwnerKeyDown = (e) => {\r\n    if (!showOwnerDropdown) return;\r\n    if (e.key === \"ArrowDown\") {\r\n      setHighlightIndex((prev) => (prev + 1) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"ArrowUp\") {\r\n      setHighlightIndex((prev) => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Enter\") {\r\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Escape\") {\r\n      setShowOwnerDropdown(false);\r\n    }\r\n  };\r\n\r\n  const handleSingleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onAddSingle(formData, !!initialValues?.id);\r\n    setFormData({ ...initialState });\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  const handleCSVChange = (e) => setCsvFile(e.target.files[0]);\r\n  const handleCSVSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!csvFile) return;\r\n    Papa.parse(csvFile, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: (results) => {\r\n        onAddCSV(results.data);\r\n        setCsvFile(null);\r\n        e.target.reset();\r\n      },\r\n    });\r\n  };\r\n\r\n  const isEditing = !!initialValues?.id;\r\n\r\n  return (\r\n    <div style={{ border: \"1px solid #ccc\", padding: \"10px\", marginBottom: \"20px\", position: \"relative\" }}>\r\n      <div style={{ marginBottom: \"10px\" }}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"single\")}\r\n          style={{ marginRight: \"10px\", background: mode === \"single\" ? \"#007bff\" : \"#ccc\", color: \"#fff\" }}\r\n        >\r\n          單筆新增\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"csv\")}\r\n          style={{ background: mode === \"csv\" ? \"#007bff\" : \"#ccc\", color: \"#fff\" }}\r\n        >\r\n          CSV 匯入\r\n        </button>\r\n      </div>\r\n\r\n      {mode === \"single\" && (\r\n        <form onSubmit={handleSingleSubmit} autoComplete=\"off\">\r\n          {fields.map((f) => {\r\n            const isRequired = f.required;\r\n\r\n            if (f.name === \"owner_user\") {\r\n              return (\r\n                <div key={f.name} style={{ position: \"relative\", marginBottom: \"5px\" }}>\r\n                  <input\r\n                    type=\"text\"\r\n                    name={f.name}\r\n                    placeholder={f.label}\r\n                    value={formData.owner_user_display || \"\"}\r\n                    onChange={handleInputChange}\r\n                    onCompositionStart={handleCompositionStart}\r\n                    onCompositionEnd={handleCompositionEnd}\r\n                    onKeyDown={handleOwnerKeyDown}\r\n                    required={isRequired}\r\n                    style={{ width: \"200px\", padding: \"5px\" }}\r\n                  />\r\n                  {showOwnerDropdown && (\r\n                    <ul style={{\r\n                      position: \"absolute\",\r\n                      top: \"30px\",\r\n                      left: 0,\r\n                      border: \"1px solid #ccc\",\r\n                      background: \"#fff\",\r\n                      listStyle: \"none\",\r\n                      margin: 0,\r\n                      padding: 0,\r\n                      width: \"200px\",\r\n                      maxHeight: \"150px\",\r\n                      overflowY: \"auto\",\r\n                      zIndex: 100\r\n                    }}>\r\n                      {ownerCandidates.map((p, idx) => (\r\n                        <li\r\n                          key={p.id}\r\n                          onClick={() => handleOwnerSelect(p)}\r\n                          style={{\r\n                            padding: \"5px\",\r\n                            cursor: \"pointer\",\r\n                            background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\r\n                            color: idx === highlightIndex ? \"#fff\" : \"#000\"\r\n                          }}\r\n                        >\r\n                          {p.name} {p.department ? `(${p.department})` : \"\"}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              );\r\n            }\r\n\r\n            return (\r\n              <input\r\n                key={f.name}\r\n                type={f.type}\r\n                name={f.name}\r\n                placeholder={f.label}\r\n                value={formData[f.name] || \"\"}\r\n                onChange={handleInputChange}\r\n                required={isRequired}\r\n                style={{ marginRight: \"10px\", marginBottom: \"5px\" }}\r\n              />\r\n            );\r\n          })}\r\n          <button type=\"submit\">{isEditing ? \"修改\" : \"新增\"}</button>\r\n        </form>\r\n      )}\r\n\r\n      {mode === \"csv\" && (\r\n        <form onSubmit={handleCSVSubmit}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".csv\"\r\n            onChange={(e) => {\r\n              handleCSVChange(e);\r\n              e.target.value = \"\";\r\n            }}\r\n            style={{ marginRight: \"10px\" }}\r\n          />\r\n          <button type=\"submit\">匯入 CSV</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenericForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}