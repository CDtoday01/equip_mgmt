{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lsps_\\\\OneDrive\\\\Documents\\\\equip_mgmt\\\\equip-frontend\\\\src\\\\components\\\\GenericForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport Papa from \"papaparse\";\nimport debounce from \"lodash/debounce\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GenericForm = ({\n  fields,\n  onAddSingle,\n  onAddCSV,\n  initialValues,\n  onOwnerInput\n}) => {\n  _s();\n  const [mode, setMode] = useState(\"single\");\n  const [formData, setFormData] = useState({});\n  const [csvFile, setCsvFile] = useState(null);\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\n  const [highlightIndex, setHighlightIndex] = useState(0);\n  const isComposing = useRef(false);\n  const initialState = useMemo(() => fields.reduce((acc, f) => ({\n    ...acc,\n    [f.name]: \"\"\n  }), {}), [fields]);\n  useEffect(() => {\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n  }, [initialValues, initialState]);\n  const handleModeChange = newMode => {\n    setMode(newMode);\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n    setCsvFile(null);\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n  const debouncedOwnerInput = useRef(debounce(async value => {\n    if (value.trim() === \"\" || !onOwnerInput) return;\n    try {\n      const candidates = await onOwnerInput(value); // 返回候選人陣列\n      setOwnerCandidates(candidates);\n      setShowOwnerDropdown(candidates.length > 0);\n      setHighlightIndex(0);\n    } catch {\n      setOwnerCandidates([]);\n      setShowOwnerDropdown(false);\n    }\n  }, 500)).current;\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === \"owner_user\" && !isComposing.current) {\n      debouncedOwnerInput(value);\n    }\n  };\n  const handleCompositionStart = () => isComposing.current = true;\n  const handleCompositionEnd = e => {\n    isComposing.current = false;\n    handleInputChange(e);\n  };\n  const handleOwnerSelect = person => {\n    setFormData(prev => ({\n      ...prev,\n      owner_user: person.id,\n      owner_user_display: person.name // ✅ 顯示在 input 上的名字\n    }));\n    setShowOwnerDropdown(false);\n  };\n  const handleOwnerKeyDown = e => {\n    if (!showOwnerDropdown) return;\n    if (e.key === \"ArrowDown\") {\n      setHighlightIndex(prev => (prev + 1) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"ArrowUp\") {\n      setHighlightIndex(prev => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\n      e.preventDefault();\n    } else if (e.key === \"Enter\") {\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\n      e.preventDefault();\n    } else if (e.key === \"Escape\") {\n      setShowOwnerDropdown(false);\n    }\n  };\n  const handleSingleSubmit = e => {\n    e.preventDefault();\n    onAddSingle(formData);\n    setFormData({\n      ...initialState,\n      ...initialValues\n    });\n    setOwnerCandidates([]);\n    setShowOwnerDropdown(false);\n    setHighlightIndex(0);\n  };\n  const handleCSVChange = e => setCsvFile(e.target.files[0]);\n  const handleCSVSubmit = e => {\n    e.preventDefault();\n    if (!csvFile) return;\n    Papa.parse(csvFile, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        onAddCSV(results.data);\n        setCsvFile(null);\n      }\n    });\n  };\n  const isEditing = !!(initialValues !== null && initialValues !== void 0 && initialValues.id);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: \"1px solid #ccc\",\n      padding: \"10px\",\n      marginBottom: \"20px\",\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"single\"),\n        style: {\n          marginRight: \"10px\",\n          background: mode === \"single\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"\\u55AE\\u7B46\\u65B0\\u589E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleModeChange(\"csv\"),\n        style: {\n          background: mode === \"csv\" ? \"#007bff\" : \"#ccc\",\n          color: \"#fff\"\n        },\n        children: \"CSV \\u532F\\u5165\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), mode === \"single\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSingleSubmit,\n      autoComplete: \"off\",\n      children: [fields.map(f => {\n        const isRequired = f.required && !(f.name === \"borrowed_at\" || f.name === \"returned_at\");\n        if (f.name === \"owner_user\") {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"relative\",\n              marginBottom: \"5px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: f.name,\n              placeholder: f.label,\n              value: formData[f.name] || \"\",\n              onChange: handleInputChange,\n              onCompositionStart: handleCompositionStart,\n              onCompositionEnd: handleCompositionEnd,\n              onKeyDown: handleOwnerKeyDown,\n              required: isRequired,\n              style: {\n                width: \"200px\",\n                padding: \"5px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 19\n            }, this), showOwnerDropdown && /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                position: \"absolute\",\n                top: \"30px\",\n                left: 0,\n                border: \"1px solid #ccc\",\n                background: \"#fff\",\n                listStyle: \"none\",\n                margin: 0,\n                padding: 0,\n                width: \"200px\",\n                maxHeight: \"150px\",\n                overflowY: \"auto\",\n                zIndex: 100\n              },\n              children: ownerCandidates.map((p, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => handleOwnerSelect(p),\n                style: {\n                  padding: \"5px\",\n                  cursor: \"pointer\",\n                  background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\n                  color: idx === highlightIndex ? \"#fff\" : \"#000\"\n                },\n                children: [p.name, \" \", p.department ? `(${p.department})` : \"\"]\n              }, p.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 21\n            }, this)]\n          }, f.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 17\n          }, this);\n        }\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: f.type,\n          name: f.name,\n          placeholder: f.label,\n          value: formData[f.name] || \"\",\n          onChange: handleInputChange,\n          required: isRequired,\n          style: {\n            marginRight: \"10px\",\n            marginBottom: \"5px\"\n          }\n        }, f.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 15\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: isEditing ? \"更新\" : \"新增\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this), mode === \"csv\" && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleCSVSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        onChange: e => {\n          handleCSVChange(e); // 原本邏輯\n          e.target.value = \"\"; // ✅ 清掉檔案名稱，避免匯入後還殘留\n        },\n        style: {\n          marginRight: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u532F\\u5165 CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n_s(GenericForm, \"jAhe01G8wb8EmJbO4enOwwOXNd4=\");\n_c = GenericForm;\nexport default GenericForm;\nvar _c;\n$RefreshReg$(_c, \"GenericForm\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","Papa","debounce","jsxDEV","_jsxDEV","GenericForm","fields","onAddSingle","onAddCSV","initialValues","onOwnerInput","_s","mode","setMode","formData","setFormData","csvFile","setCsvFile","ownerCandidates","setOwnerCandidates","showOwnerDropdown","setShowOwnerDropdown","highlightIndex","setHighlightIndex","isComposing","initialState","reduce","acc","f","name","handleModeChange","newMode","debouncedOwnerInput","value","trim","candidates","length","current","handleInputChange","e","target","prev","handleCompositionStart","handleCompositionEnd","handleOwnerSelect","person","owner_user","id","owner_user_display","handleOwnerKeyDown","key","preventDefault","handleSingleSubmit","handleCSVChange","files","handleCSVSubmit","parse","header","skipEmptyLines","complete","results","data","isEditing","style","border","padding","marginBottom","position","children","type","onClick","marginRight","background","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","autoComplete","map","isRequired","required","placeholder","label","onChange","onCompositionStart","onCompositionEnd","onKeyDown","width","top","left","listStyle","margin","maxHeight","overflowY","zIndex","p","idx","cursor","department","accept","_c","$RefreshReg$"],"sources":["C:/Users/lsps_/OneDrive/Documents/equip_mgmt/equip-frontend/src/components/GenericForm.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nconst GenericForm = ({ fields, onAddSingle, onAddCSV, initialValues, onOwnerInput }) => {\r\n  const [mode, setMode] = useState(\"single\");\r\n  const [formData, setFormData] = useState({});\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const [ownerCandidates, setOwnerCandidates] = useState([]);\r\n  const [showOwnerDropdown, setShowOwnerDropdown] = useState(false);\r\n  const [highlightIndex, setHighlightIndex] = useState(0);\r\n  const isComposing = useRef(false);\r\n  const initialState = useMemo(\r\n    () => fields.reduce((acc, f) => ({ ...acc, [f.name]: \"\" }), {}),\r\n    [fields]\r\n  );\r\n\r\n  useEffect(() => {\r\n    setFormData({ ...initialState, ...initialValues });\r\n  }, [initialValues, initialState]);\r\n\r\n  const handleModeChange = (newMode) => {\r\n    setMode(newMode);\r\n    setFormData({ ...initialState, ...initialValues });\r\n    setCsvFile(null);\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  const debouncedOwnerInput = useRef(\r\n    debounce(async (value) => {\r\n      if (value.trim() === \"\" || !onOwnerInput) return;\r\n      try {\r\n        const candidates = await onOwnerInput(value); // 返回候選人陣列\r\n        setOwnerCandidates(candidates);\r\n        setShowOwnerDropdown(candidates.length > 0);\r\n        setHighlightIndex(0);\r\n      } catch {\r\n        setOwnerCandidates([]);\r\n        setShowOwnerDropdown(false);\r\n      }\r\n    }, 500)\r\n  ).current;\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n\r\n    if (name === \"owner_user\" && !isComposing.current) {\r\n      debouncedOwnerInput(value);\r\n    }\r\n  };\r\n\r\n  const handleCompositionStart = () => (isComposing.current = true);\r\n  const handleCompositionEnd = (e) => {\r\n    isComposing.current = false;\r\n    handleInputChange(e);\r\n  };\r\n\r\n  const handleOwnerSelect = (person) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      owner_user: person.id,\r\n      owner_user_display: person.name  // ✅ 顯示在 input 上的名字\r\n    }));\r\n    setShowOwnerDropdown(false);\r\n  };\r\n\r\n  const handleOwnerKeyDown = (e) => {\r\n    if (!showOwnerDropdown) return;\r\n    if (e.key === \"ArrowDown\") {\r\n      setHighlightIndex((prev) => (prev + 1) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"ArrowUp\") {\r\n      setHighlightIndex((prev) => (prev - 1 + ownerCandidates.length) % ownerCandidates.length);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Enter\") {\r\n      handleOwnerSelect(ownerCandidates[highlightIndex]);\r\n      e.preventDefault();\r\n    } else if (e.key === \"Escape\") {\r\n      setShowOwnerDropdown(false);\r\n    }\r\n  };\r\n\r\n  const handleSingleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onAddSingle(formData);\r\n    setFormData({ ...initialState, ...initialValues });\r\n    setOwnerCandidates([]);\r\n    setShowOwnerDropdown(false);\r\n    setHighlightIndex(0);\r\n  };\r\n\r\n  const handleCSVChange = (e) => setCsvFile(e.target.files[0]);\r\n\r\n  const handleCSVSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!csvFile) return;\r\n    Papa.parse(csvFile, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: (results) => {\r\n        onAddCSV(results.data);\r\n        setCsvFile(null);\r\n      },\r\n    });\r\n  };\r\n\r\n  const isEditing = !!initialValues?.id;\r\n\r\n  return (\r\n    <div style={{ border: \"1px solid #ccc\", padding: \"10px\", marginBottom: \"20px\", position: \"relative\" }}>\r\n      <div style={{ marginBottom: \"10px\" }}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"single\")}\r\n          style={{ marginRight: \"10px\", background: mode === \"single\" ? \"#007bff\" : \"#ccc\", color: \"#fff\" }}\r\n        >\r\n          單筆新增\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => handleModeChange(\"csv\")}\r\n          style={{ background: mode === \"csv\" ? \"#007bff\" : \"#ccc\", color: \"#fff\" }}\r\n        >\r\n          CSV 匯入\r\n        </button>\r\n      </div>\r\n\r\n      {mode === \"single\" && (\r\n        <form onSubmit={handleSingleSubmit} autoComplete=\"off\">\r\n          {fields.map((f) => {\r\n            const isRequired = f.required && !(f.name === \"borrowed_at\" || f.name === \"returned_at\");\r\n\r\n            if (f.name === \"owner_user\") {\r\n              return (\r\n                <div key={f.name} style={{ position: \"relative\", marginBottom: \"5px\" }}>\r\n                  <input\r\n                    type=\"text\"\r\n                    name={f.name}\r\n                    placeholder={f.label}\r\n                    value={formData[f.name] || \"\"}\r\n                    onChange={handleInputChange}\r\n                    onCompositionStart={handleCompositionStart}\r\n                    onCompositionEnd={handleCompositionEnd}\r\n                    onKeyDown={handleOwnerKeyDown}\r\n                    required={isRequired}\r\n                    style={{ width: \"200px\", padding: \"5px\" }}\r\n                  />\r\n                  {showOwnerDropdown && (\r\n                    <ul style={{\r\n                      position: \"absolute\",\r\n                      top: \"30px\",\r\n                      left: 0,\r\n                      border: \"1px solid #ccc\",\r\n                      background: \"#fff\",\r\n                      listStyle: \"none\",\r\n                      margin: 0,\r\n                      padding: 0,\r\n                      width: \"200px\",\r\n                      maxHeight: \"150px\",\r\n                      overflowY: \"auto\",\r\n                      zIndex: 100\r\n                    }}>\r\n                      {ownerCandidates.map((p, idx) => (\r\n                        <li\r\n                          key={p.id}\r\n                          onClick={() => handleOwnerSelect(p)}\r\n                          style={{\r\n                            padding: \"5px\",\r\n                            cursor: \"pointer\",\r\n                            background: idx === highlightIndex ? \"#007bff\" : \"#fff\",\r\n                            color: idx === highlightIndex ? \"#fff\" : \"#000\"\r\n                          }}\r\n                        >\r\n                          {p.name} {p.department ? `(${p.department})` : \"\"}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              );\r\n            }\r\n\r\n            return (\r\n              <input\r\n                key={f.name}\r\n                type={f.type}\r\n                name={f.name}\r\n                placeholder={f.label}\r\n                value={formData[f.name] || \"\"}\r\n                onChange={handleInputChange}\r\n                required={isRequired}\r\n                style={{ marginRight: \"10px\", marginBottom: \"5px\" }}\r\n              />\r\n            );\r\n          })}\r\n          <button type=\"submit\">{isEditing ? \"更新\" : \"新增\"}</button>\r\n        </form>\r\n      )}\r\n\r\n      {mode === \"csv\" && (\r\n        <form onSubmit={handleCSVSubmit}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".csv\"\r\n            onChange={(e) => {\r\n              handleCSVChange(e);   // 原本邏輯\r\n              e.target.value = \"\";  // ✅ 清掉檔案名稱，避免匯入後還殘留\r\n            }}\r\n            style={{ marginRight: \"10px\" }}\r\n          />\r\n          <button type=\"submit\">匯入 CSV</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenericForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}